[gd_scene load_steps=15 format=3 uid="uid://dji12mak03hku"]

[ext_resource type="Script" uid="uid://cokmj1q7s6ab7" path="res://Game/world.gd" id="1_3kekb"]
[ext_resource type="Theme" uid="uid://k1wwefkpb70t" path="res://UI/game_theme.tres" id="1_pecy7"]
[ext_resource type="PackedScene" uid="uid://c5auwrdgqvt1a" path="res://Game/player_board.tscn" id="2_3kekb"]
[ext_resource type="Script" uid="uid://b27jsrdl1j57m" path="res://Game/data/game_state.gd" id="3_jwkme"]
[ext_resource type="Script" uid="uid://dxkqib41uryfs" path="res://Game/item_display.gd" id="3_ps1nv"]
[ext_resource type="PackedScene" uid="uid://drw5syeijuvky" path="res://Game/mine_layer.tscn" id="4_16ps5"]
[ext_resource type="PackedScene" uid="uid://fcbjc5acubwe" path="res://Game/item_display_row.tscn" id="4_ho6sb"]
[ext_resource type="Script" uid="uid://dhc518iykwv14" path="res://Game/player_states.gd" id="6_4ncwh"]
[ext_resource type="PackedScene" uid="uid://cho1mjxxemfva" path="res://Game/cheat_items.tscn" id="6_hvno2"]
[ext_resource type="Script" uid="uid://6gwui0npktnq" path="res://Game/debug_menu.gd" id="6_r7jf0"]

[sub_resource type="Theme" id="Theme_3kekb"]

[sub_resource type="Theme" id="Theme_jwkme"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_3kekb"]
bg_color = Color(0, 0, 0, 1)

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_jwkme"]
properties/0/path = NodePath("GameState:example_int")
properties/0/spawn = true
properties/0/replication_mode = 1

[node name="World" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("1_pecy7")
script = ExtResource("1_3kekb")
PlayerBoard = ExtResource("2_3kekb")
MineLayer = ExtResource("4_16ps5")
NumCols = 10
LayerThickness = 7
SkyHeight = 300
TileMapScale = 2

[node name="SplitContainer" type="HSplitContainer" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 6
size_flags_vertical = 6
split_offset = 100

[node name="HudContainer" type="PanelContainer" parent="SplitContainer"]
layout_mode = 2
theme = SubResource("Theme_3kekb")

[node name="HFlowContainer" type="HFlowContainer" parent="SplitContainer/HudContainer"]
layout_mode = 2

[node name="Button" type="Button" parent="SplitContainer/HudContainer/HFlowContainer"]
layout_mode = 2
text = "Build Miner"

[node name="Button2" type="Button" parent="SplitContainer/HudContainer/HFlowContainer"]
layout_mode = 2
text = "Build Solar"

[node name="Asteroid" type="PanelContainer" parent="SplitContainer"]
layout_mode = 2
theme = SubResource("Theme_jwkme")

[node name="ScrollContainer" type="ScrollContainer" parent="SplitContainer/Asteroid"]
custom_minimum_size = Vector2(960, 0)
layout_mode = 2
size_flags_horizontal = 4
theme_override_styles/panel = SubResource("StyleBoxFlat_3kekb")

[node name="BoardHolder" type="HBoxContainer" parent="SplitContainer/Asteroid/ScrollContainer"]
unique_name_in_owner = true
layout_mode = 2

[node name="VBoxContainer" type="VBoxContainer" parent="SplitContainer/Asteroid"]
layout_mode = 2

[node name="ItemDisplay" type="MarginContainer" parent="SplitContainer/Asteroid/VBoxContainer"]
unique_name_in_owner = true
custom_minimum_size = Vector2(400, 400)
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0
script = ExtResource("3_ps1nv")
item_display_row = ExtResource("4_ho6sb")

[node name="ScrollContainer" type="ScrollContainer" parent="SplitContainer/Asteroid/VBoxContainer/ItemDisplay"]
layout_mode = 2

[node name="ItemDisplayList" type="VBoxContainer" parent="SplitContainer/Asteroid/VBoxContainer/ItemDisplay/ScrollContainer"]
unique_name_in_owner = true
layout_mode = 2

[node name="DebugMenu" type="MarginContainer" parent="SplitContainer/Asteroid/VBoxContainer"]
unique_name_in_owner = true
custom_minimum_size = Vector2(400, 0)
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0
script = ExtResource("6_r7jf0")

[node name="VBoxContainer" type="VBoxContainer" parent="SplitContainer/Asteroid/VBoxContainer/DebugMenu"]
layout_mode = 2

[node name="CheatItems" parent="SplitContainer/Asteroid/VBoxContainer/DebugMenu/VBoxContainer" instance=ExtResource("6_hvno2")]
layout_mode = 2

[node name="WorldGen" type="MarginContainer" parent="SplitContainer/Asteroid/VBoxContainer/DebugMenu/VBoxContainer"]
layout_mode = 2

[node name="VBoxContainer" type="VBoxContainer" parent="SplitContainer/Asteroid/VBoxContainer/DebugMenu/VBoxContainer/WorldGen"]
layout_mode = 2

[node name="SeedText" type="Label" parent="SplitContainer/Asteroid/VBoxContainer/DebugMenu/VBoxContainer/WorldGen/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
text = "Seed: 12344567"

[node name="RegenWorldButton" type="Button" parent="SplitContainer/Asteroid/VBoxContainer/DebugMenu/VBoxContainer/WorldGen/VBoxContainer"]
layout_mode = 2
text = "Regenerate World"

[node name="GameState" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("3_jwkme")

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_jwkme")

[node name="PlayerStates" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("6_4ncwh")

[node name="PlayerSpawner" type="MultiplayerSpawner" parent="."]
unique_name_in_owner = true
_spawnable_scenes = PackedStringArray("uid://b47vu2y258g5v")
spawn_path = NodePath("../PlayerStates")
spawn_limit = 3

[connection signal="pressed" from="SplitContainer/HudContainer/HFlowContainer/Button" to="." method="_on_build_miner_button_pressed"]
[connection signal="pressed" from="SplitContainer/HudContainer/HFlowContainer/Button2" to="." method="_on_build_solar_button_pressed"]
[connection signal="add_items" from="SplitContainer/Asteroid/VBoxContainer/DebugMenu/VBoxContainer/CheatItems" to="SplitContainer/Asteroid/VBoxContainer/DebugMenu" method="_on_cheat_items_add_items"]
[connection signal="pressed" from="SplitContainer/Asteroid/VBoxContainer/DebugMenu/VBoxContainer/WorldGen/VBoxContainer/RegenWorldButton" to="SplitContainer/Asteroid/VBoxContainer/DebugMenu" method="_on_regen_world_button_pressed"]
